\todo{add expository intro}

\subsection{Notions of measurability}

Consider a measurable space $(S,\mc{A})$,\footnote{i.e. $S$ is a set and $\mc{A}$ is a $\sigma$-algebra of subsets of $S$.} and a Banach space $X$ over a scalar field $\K$ (either $\R$ or $\C$).
The topic of these notes is the analysis of functions $\map{f}{S}{X}$, and of operators acting on such functions.
Thus it will be useful for us to gain some familiarity with the idea of $X$-valued functions.

The simplest kind of $X$-valued function arises by taking a \emph{scalar}-valued function $\map{f}{S}{\K}$ and a non-zero vector $\mb{x} \in X$, and `placing $f$ in the direction of $\mb{x}$'.
This function is denoted by $f \otimes \mb{x}$ and formally defined by
\begin{equation*}
  \map{f \otimes \mb{x}}{S}{X}, \qquad (f \otimes \mb{x})(s) := f(s)\mb{x} \quad \text{for all $s \in S$.}
\end{equation*}
The range of $f \otimes \mb{x}$ is contained in the linear span of $\mb{x}$, and is thus `one-dimensional'.

The second simplest kind of $X$-valued function are the \emph{simple functions}.
A function $\map{f}{S}{X}$ is \emph{simple} if there exists a finite collection of pairwise disjoint measurable subsets $S_1,\ldots,S_N \subset S$ and non-zero vectors $\mb{x}_1,\ldots,\mb{x}_N \in X$ such that
\begin{equation}\label{eqn:simple-function-standard-form}
  f = \sum_{n=1}^N \1_{S_n} \otimes \mb{x}_n ,
\end{equation}
where $\1_{S_n}$ is the indicator function of $S_n$.
We denote the vector space of simple functions $S \to X$ by $\Simp(S;X)$ or $\Simp_{\mc{A}}(S;X)$.
Note that the range of $f$ is contained in $\spn(\mb{x}_1,\ldots,\mb{x}_N)$, so $f$ can be thought of as `finite-dimensional'.

Of course, we need more than simple functions; measure theory tells us that the most useful class of functions are the \emph{measurable functions}.
When considering Banach-valued functions, particularly when our Banach spaces are allowed to be infinite-dimensional, there is more than one notion of measurability, and these are generally inequivalent.

\begin{defn}
  Consider a function $\map{f}{S}{X}$.
  We say that $f$ is
  \begin{itemize}
  \item
    \emph{measurable} if for every Borel set $B \subset X$, the preimage $f^{-1}(B)$ is measurable;
  \item
    \emph{strongly measurable} (or \emph{Bochner measurable}) if it is the pointwise limit of simple functions; that is, if there exists a sequence $(f_n)_{n=1}^\infty$ in $\Simp(S;X)$ such that $f = \lim_{n \to \infty} f_n$ pointwise on $S$;
  \item
    \emph{weakly measurable} if for every functional $\mb{x}^* \in X^*$, the function $\map{\langle f, \mb{x}^*\rangle}{S}{\K}$ given by $s \mapsto \langle f(s), \mb{x}^* \rangle$ is measurable.
  \end{itemize}
  All of these notions implicitly refer to the $\sigma$-algebra $\mc{A}$.

  
\end{defn}

With the convenient notation
\begin{center}
  \begin{tabular}{r|l}
    $\Meas (S;X)$  & Measurable $\map{f}{S}{X}$    \\
    $\SMeas(S;X)$  & Strongly measurable $\map{f}{S}{X}$ \\
    $\WMeas(S;X)$  & Weakly measurable $\map{f}{S}{X}$,
  \end{tabular}
\end{center}
we have the containment
\begin{equation}\label{eq:measurability-inclusions}
  \SMeas(S;X) \subset \Meas(S;X) \subset \WMeas(S;X)
\end{equation}
(Exercise \ref{ex:measurability-containments}).
When $X$ is finite-dimensional these notions coincide: the derivation of strong measurability from measurability is a standard result in measure theory,\footnote{See for example \cite[Corollary 4.2.7]{rD04} in the one-dimensional case; extending this to the finite-dimensional case can be done by summing up coordinates.} and weak measurability is just a convoluted rewriting of coordinatewise measurability.
But in the general context of Banach spaces the inclusions \eqref{eq:measurability-inclusions} are strict.

\begin{example}[A measurable function which is not strongly measurable]\todo{Can we do this with a $\sigma$-finite measure space? Maybe an uncountable product of probability spaces? Countable generation should be the issue.}
  Let $X$ be a Banach space, and consider the identity map $\map{I}{X}{X}$, which is continuous and hence measurable.
  If $I$ is strongly measurable, then there exists a sequence of simple functions $(i_n)_{n \in \N}$ converging pointwise to $I$.
  For each $\mb{x} \in X$ we then have
  \begin{equation*}
    \mb{x} = \lim_{n \to \infty} i_n(\mb{x}),
  \end{equation*}
  so that the union $U := \cup_{n \in \N} i_n(X)$ is dense in $X$.
  Since each $i_n$ is simple, $U$ is countable, which implies that $X$ is separable.
  Thus if $X$ is not separable (e.g. if $X = L^\infty(\R)$), the identity map $\map{I_X}{X}{X}$ is measurable (even continuous) but not strongly measurable.
\end{example}

\begin{rmk}
  The existence of weakly measurable functions that are not measurable is not so simple, but see \cite[Example 1.4.3]{HNVW16} for an argument which shows that the $\sigma$-algebra $\sigma(X^*)$ may be strictly smaller than the Borel $\sigma$-algebra on $X$.
  The indicator function of a Borel set which is not in $\sigma(X^*)$ is then weakly measurable, but not measurable.
\end{rmk}

It turns out that the notion of strong measurability is strongly connected with that of separability.

\begin{thm}[Pettis measurability theorem]\label{thm:Pettis-measurability}
  Let $(S,\mc{A})$ be a measurable space and $X$ a Banach space.
  Then a function $\map{f}{S}{X}$ is strongly measurable if and only if it is weakly measurable and \emph{separably valued} (i.e. there exists a separable subspace $X' \subset X$ such that $f(S) \subset X'$).
  In particular, if $X$ is separable, then
  \begin{equation*}
    \SMeas(S;X) = \Meas(S;X) = \WMeas(S;X).
  \end{equation*}
\end{thm}

\begin{proof}
  First suppose that $f$ is strongly measurable.
  Then $f$ is automatically weakly measurable, and we just need to show that $f$ is separably valued.
  Let $(f_n)_{n \in \N}$ be a sequence of simple functions converging to $f$ pointwise.
  Let $X_n \subset X$ be the closure of the range of $f_n$.
  Each $X_n$ is finite-dimensional, hence separable, and the closed subspace $X'$ of $X$ generated by the collection $(X_n)_{n \in \N}$ is also separable.
  Since $f_n \to f$ pointwise, the range of $f$ is contained in $X'$, and thus $f$ is separably valued.

  Now assume that $f$ is weakly measurable and separably valued.
  Without loss of generality we may simply assume that $X$ is separable (potentially replacing $X$ by the closure of the range of $f$).
  Let $(\mb{x}_n)_{n \in \N}$ be a dense sequence in $X$, and for each $n \in \N$ define a function $\map{\phi_n}{X}{\{\mb{x}_1,\ldots,\mb{x}_n\}}$ such that for all $\mb{x} \in X$,
  \begin{equation*}
    \|\mb{x} - \phi_n(\mb{x})\|_X = \min_{1 \leq j \leq n} \|\mb{x} - \mb{x}_j\|_X.
  \end{equation*}
  By density of $(\mb{x}_n)_{n \in \N}$ in $X$ we thus have that $\phi_n(\mb{x}) \to \mb{x}$ for all $\mb{x} \in X$.
  Now define functions $\map{f_n}{S}{X}$ by
  \begin{equation*}
    f_n(s) := \phi_n(f(s)) \qquad \forall s \in S,
  \end{equation*}
  so that $f_n \to f$ pointwise.
  Each $f_n$ has finite range, so to show that $f_n$ is simple we need only show that the preimages $f_n^{-1}(\mb{x}_k)$ are measurable.
  For all $1 \leq k \leq n$ We have
  \begin{equation*}
    f_n^{-1}(\mb{x}_k)
    = \{\phi_n(f(s)) = \mb{x}_k \}
    = \{\|f(s) - \mb{x}_k\|_X = \min_{1 \leq j \leq n} \|f(s) - \mb{x}_j\|_X \}.
  \end{equation*}
  Let $(\mb{x}_n^*)_{n \in \N}$ be a norming sequence of unit vectors on $X^*$; then since $f$ is weakly measurable, for each $j \in \{1,\ldots,n\}$ the function
  \begin{equation*}
    s \mapsto \|f(s) - \mb{x}_j\|_X = \sup_{n \in \N} |\langle f(s) - \mb{x}_j, \mb{x}_n^* \rangle|
  \end{equation*}
  is measurable (being the countable supremum of measurable functions).
  Thus the function
  \begin{equation*}
    \min_{1 \leq j \leq n} \|f(s) - \mb{x}_j\|_X
  \end{equation*}
  is also measurable, and the representation above shows that $f_n^{-1}(\mb{x}_k)$ is measurable (being the set on which two measurable functions are equal).
  Hence $f_n$ is simple, and consequently $f$ is strongly measurable.
\end{proof}

As a quick application of this result, we show that strong measurability is preserved under multiplication with measurable scalar-valued functions.\footnote{This can also be proven directly via pointwise approximation with simple functions.}

\begin{cor}\label{cor:strong-meas-meas-mult}
  Suppose that $\map{f}{S}{X}$ is strongly measurable and the scalar-valued function $\map{\phi}{S}{\K}$ is measurable.
  Then the product $\map{\phi f}{S}{X}$, $(\phi f)(s) := \phi(s)f(s)$, is strongly measurable.
\end{cor}

\begin{proof}
  By the Pettis measurability theorem, it is equivalent to show that $\phi f$ is weakly measurable and separably-valued. 
  First we show weak measurability: for each functional $\mb{x}^* \in X^*$ write for $s \in S$
  \begin{equation*}
    \langle \phi f, \mb{x}^* \rangle(s) = \phi(s) \langle f(s) , \mb{x}^* \rangle = \phi \langle f, \mb{x}^* \rangle.
  \end{equation*}
  Since $f$ is strongly measurable, it is also weakly measurable, and thus the product $\phi \langle f, \mb{x}^* \rangle$ is measurable.
  Since this is true for all $\mb{x}^* \in X^*$, we find that $\phi f$ is weakly measurable.
  To show that $\phi f$ is separably-valued, first note that since $f$ is separably-valued, there exists a separable closed subspace $X_0 \subset X$ such that $f(s) \in X_0$ for all $s \in S$.
  But then $\phi(s)f(s) \in X_0$ as well, so $\phi f$ is separably-valued.
\end{proof}

Before moving on to Bochner spaces we note that almost-everywhere equality of strongly measurable functions is equivalent to `coordinatewise' almost-everywhere equality.
This is a surprisingly useful observation; it is often used to deduce identities for vector-valued functions from corresponding identities for scalar-valued functions.

\begin{lem}\label{lem:coordinatewise-equality-test}
  Let $(S,\mc{A},\mu)$ be a measure space and $X$ a Banach space.
  Suppose that $\map{f,g}{S}{X}$ are two strongly measurable functions.
  Then $f$ and $g$ are equal almost everywhere if and only if for all functionals $\mb{x}^* \in X^*$, the scalar-valued functions $\langle f, \mb{x}^*\rangle$ and $\langle g, \mb{x}^* \rangle$ are equal almost everywhere.
\end{lem}

\begin{proof}
  The implication
  \begin{equation*}
    f \stackrel{\ae}{=}g \Longrightarrow \forall \mb{x}^* \in X^* \;  \langle f, \mb{x}^* \rangle \stackrel{\ae}{=} \langle g, \mb{x}^* \rangle
  \end{equation*}
  is straightforward, and is even true for (non-strongly) measurable functions, so we omit the proof.
  The converse direction is harder because although each of the sets
  \begin{equation*}
    N_{\mb{x}^*} := \{s \in S : \langle f(s), \mb{x}^* \rangle \neq \langle g(s), \mb{x}^* \rangle\} \qquad \mb{x}^* \in X^*
  \end{equation*}
  has measure zero, the (uncountable!) union of these sets over all $\mb{x}^* \in X^*$ does not \emph{a priori} have measure zero.
  This is where strong measurability comes into play, via the Pettis theorem.
  Since $f$ and $g$ are separably-valued, there exists a separable closed subspace $X_0 \subset X$ such that both $f$ and $g$ are $X_0$-valued.
  Since $X_0$ is separable, there is a (countable!) sequence $(\mb{x}_n^*)_{n \in \N}$ in $X^*$ which separates points of $X_0$.\footnote{That is, if $\mb{x} \neq \mb{y} \in X_0$, then there exists $n \in \N$ such that $\langle \mb{x}, \mb{x}_n^* \rangle \neq \langle \mb{y}, \mb{x}_n^* \rangle$. See \cite[Proposition B.1.11]{HNVW16}.}
  Now define
  \begin{equation*}
    N := \bigcup_{n \in \N} N_{\mb{x}_n^*};
  \end{equation*}
  this set has measure zero since it is the countable union of sets with measure zero.
  For all $s \notin N$ we then have $\langle f(s), \mb{x}_n^* \rangle = \langle g(s), \mb{x}_n^* \rangle$ for all $n \in \N$, and since $(\mb{x}_n^*)_{n \in \N}$ separates points of $X_0$, it follows that $f(s) = g(s)$.
  Thus $f \stackrel{\ae}{=} g$.  
\end{proof}



\subsection{Bochner spaces}

Given $\map{f}{S}{X}$, we let $\|f\|_X$ denote the scalar-valued function $S \to \K$ defined by $s \mapsto \|f(s)\|_X$.
If $f$ is strongly measurable, then $\|f\|_X$ is also measurable, since the function $\mb{x} \mapsto \|\mb{x}\|_X$ is continuous.

\begin{defn}
  Let $(S,\mc{A},\mu)$ be a measure space.
  For $p \in [1,\infty]$, we let $L^p(S,\mu;X)$ denote the set of \emph{strongly} measurable functions $f \in \SMeas(S;X)$ such that $\|f\|_X \in L^p(S,\mu)$, modulo $\mu$-a.e. equality, and we write
  \begin{equation*}
    \|f\|_{L^p(S,\mu;X)} := \| \|f\|_X \|_{L^p(S,\mu)}.
  \end{equation*}
  Each $L^p(S,\mu;X)$ is a Banach space: the proof is identical to the classic proof in the scalar-valued case.\footnote{For revision see \cite[Theorem 5.2.1]{rD04}.}
\end{defn}

\begin{rmk}
  It is possible for $\|f\|_X$ to be in $L^p(S)$ without $f$ itself being strongly measurable (or even measurable).
  Such a function does not qualify for membership in $L^p(S;X)$.
\end{rmk}


\begin{prop}\label{prop:simple-density}
  Let $X$ be a Banach space and $p \in [1,\infty)$.
  Then the subspace of simple functions $\Simp(S;X) \cap L^p(S;X)$ is dense in $L^p(S;X)$.
\end{prop}

\begin{proof}
  % L^infty, if needed
  % Let $f \in L^p(S;X)$ and consider the truncations
  % \begin{equation*}
  %   f_\lambda := \1_{\{s \in S : \|f_\lambda(s)\|_X \leq \lambda\}} f \qquad \forall \lambda > 0.
  % \end{equation*}
  % Then $\|(f - f_{\lambda})(s)\|_X^p \leq \|f(s)\|_X^p$ for almost all $s \in S$, so by dominated convergence
  % \begin{equation*}
  %   \begin{aligned}
  %     \lim_{\lambda \to \infty} \|f - f_{\lambda}\|_{L^p(S;X)}^p
  %     &= \lim_{\lambda \to \infty} \int_{S} \|(f - f_{\lambda})(s)\|_X^p \, \dd\mu(s) \\
  %     &= \int_{S} \lim_{\lambda \to \infty}  \|(f - f_{\lambda})(s)\|_X^p \, \dd\mu(s) = 0.
  %   \end{aligned}
  % \end{equation*}
  % Thus $f_{\lambda} \to f$ in $L^p(S;X)$ as $\lambda \to \infty$, and since each $f_{\lambda}$ is in $L^\infty(S;X) \cap L^p(S;X)$, thus subspace is dense in $L^p(S;X)$.

  Fix $f \in L^p(S;X)$.
  Since $f$ is strongly measurable, there exists a sequence of simple functions $f_n \in \Simp(S;X)$ with $\lim_{n \to \infty} f_n = f$ pointwise almost everywhere.
  Now set
  \begin{equation*}
    g_n := \1_{ \{s \in S : \|f_n(s)\|_X \leq 2\|f\|_X \} } f_n;
  \end{equation*}
  the functions $g_n$ are simple and they also converge to $f$ pointwise almost everywhere.
  Furthermore we have
  \begin{equation*}
    \|g_n\|_{L^p(S;X)}^p = \int_{\{s \in S : \|f_n(s)\|_X \leq 2\|f\|_X \} } \|f_n(s)\|_X^p \, \dd\mu(s) \leq 2^p \|f\|_{L^p(S;X)}^p,
  \end{equation*}
  so each $g_n$ is in $L^p(S;X)$.
  Since $\|f(s) - g_n(s)\|_X \leq 3\|f(s)\|_X$ for almost all $s$, dominated convergence yields
  \begin{equation*}
    \begin{aligned}
      \lim_{n \to \infty} \|f - g_n\|_{L^p(S;X)}^p &= \lim_{n \to \infty} \int_S \|f(s) - g_n(s)\|_{X}^p \, \dd\mu(s) \\
      &= \int_S \lim_{n \to \infty}  \|f(s) - g_n(s)\|_{X}^p \, \dd\mu(s) = 0,
    \end{aligned}
  \end{equation*}
  so that $g_n \to f$ in $L^p(S;X)$, completing the proof.
\end{proof}

Note that the case $p = \infty$ is not included in the proposition above, even though the simple functions are dense in $L^\infty(S)$.

\begin{prop}
  Let $X$ be a Banach space.
  Then the simple functions are dense in $\ell^\infty(\N;X)$ if and only if $X$ is finite dimensional.\footnote{This proposition can be extended to more general measure space $S$ in place of $\N$, provided $S$ contains infinitely many disjoint measurable sets of positive measure.}
\end{prop}

\begin{proof}
  First suppose $X$ is finite dimensional, and fix $f \in \ell^\infty(\N;X)$ and $\varepsilon > 0$.
  Let $C = \|f\|_{\ell^\infty(\N;X)}$, and note that the closed ball $\overline{B_C(0)} \subset X$ is compact (this uses finite dimensionality of $X$).
  Thus there exists a finite collection of vectors $(\mb{x}_i)_{i=1}^N$ in $\overline{B_C(0)}$ such that the open balls $B_{\varepsilon}(\mb{x}_i)$ cover $\overline{B_C(0)}$.
  For each $n \in \N$ we thus have that $f(n) \in B_{\varepsilon}(\mb{x}_{i(n)})$ for some $i(n) \in \{1,\ldots,N\}$.
  Define a function $\map{f_{\varepsilon}}{\N}{X}$ by
  \begin{equation*}
    f_{\varepsilon}(n) := \mb{x}_{i(n)};
  \end{equation*}
  since the range of $f_{\varepsilon}$ is finite, $f_{\varepsilon}$ is simple.
  Furthermore since $f(n) \in B_{\varepsilon}(\mb{x}_{i(n)})$ for each $n \in \N$ we have
  \begin{equation*}
    \|f - f_{\varepsilon}\|_{\ell^\infty(\N;X)} = \sup_{n \in \N} \|f(n) - \mb{x}_{i(n)}\|_{X} \leq \varepsilon.
  \end{equation*}
  Since $\varepsilon > 0$ was arbitrary, we have established density of the simple functions in $\ell^\infty(\N;X)$ when $X$ is finite dimensional.

  Now we prove the converse.
  Aiming for a contradiction, suppose that $X$ is infinite dimensional.
  Then there exists a sequence $(\mb{a}_n)_{n \in \N}$ of unit vectors in $X$ such that
  \begin{equation*}
    \|\mb{a}_n - \mb{a}_m\|_X > 1/2 \qquad \text{for all $n \neq m$.}
  \end{equation*}
  Now let $f(n) = \mb{a}_n$ for all $n \in \N$, so that $f \in \ell^\infty(\N;X)$, and suppose that there exists a simple function $g \in \Simp(\N;X)$ with $\|f - g\|_{\ell^\infty(\N;X)} < 1/4$.
  Then for all $n \neq m$ we must have
  \begin{equation*}
    \begin{aligned}
      \|\mb{a}_n - \mb{a}_m\|_X &\leq \|f(n) - g(n)\|_X + \|g(n) - g(m)\|_X + \|g(m) - f(m)\|_X \\
      &\leq \frac{1}{2} + \|g(n) - g(m)\|_X,
    \end{aligned}
  \end{equation*}
  so that
  \begin{equation*}
    \|g(n) - g(m)\|_X \geq \|\mb{a}_n - \mb{a}_m\|_X - \frac{1}{2} > 0.
  \end{equation*}
  It follows that $g$ has infinite range, contradicting the assumption that $g$ is simple.
\end{proof}

Now we present some elementary duality results.
Recall the definition of the H\"older conjugate from Section \ref{sec:conventions}.
Given a measure space $(S,\mc{A},\mu)$ and a Banach space $X$, every function $g \in L^{p'}(S;X^*)$ induces a bounded linear functional $\Phi g \in L^p(S;X)^*$ by integration of the duality pairing between $X$ and $X^*$:
\begin{equation*}
  \Phi g(f) := \int_S \langle f(s), g(s) \rangle \, \dd\mu(s) \qquad \forall f \in L^p(S;X).
\end{equation*}
H\"older's inequality implies that $\|\Phi g\|_{L^p(S;X)^*} \leq \|g\|_{L^{p'}(S;X^*)}$.
In the scalar case $X = \K$, $\Phi$ is an isometric isomorphism $L^{p'}(S) \cong L^p(S)^*$: that is, every functional $\phi \in L^p(S)^*$ is of the form $\phi = \Phi g$ for some $g \in L^{p'}(S)$, and furthermore $\|\phi\|_{L^p(S)^*} = \|g\|_{L^{p'}(S)}$.
We will see in Section \ref{sec:RNP} that for general Banach spaces $X$, $\Phi$ is an isometric isomorphism if and only if $X$ has the \emph{Radon--Nikodym property}.
For now we will establish a duality result that holds for every Banach space.

\begin{prop}\label{prop:bochner-preduality}
  Let $(S,\mc{A},\mu)$ be a $\sigma$-finite measure space\footnote{The $\sigma$-finiteness assumption is only needed for $p = 1$.} and $X$ a Banach space.
  Then for all $1 \leq p \leq \infty$, the map $\map{\Phi}{L^{p'}(S;X^*)}{L^p(S;X)^*}$ is an isometry onto a closed subspace of $L^p(S;X)^*$ which is norming for $L^p(S;X)$: that is, for every $f \in L^p(S;X)$,
  \begin{equation*}
    \|f\|_{L^p(S;X)} = \sup_{\substack{g \in L^{p'}(S;X^*) \\ g \neq 0}} \frac{| \Phi g(f) |}{\|g\|}
    = \sup_{\substack{g \in L^{p'}(S;X^*) \\ \|g\| = 1}} \Big| \int_S \langle f(s), g(s) \rangle \, \dd\mu(s) \Big|.
  \end{equation*}
\end{prop}

\begin{proof}
  To show that $\Phi$ is an isometry, it suffices to show that $\|\Phi g\|_{L^p(S;X)^*} \geq 1$ whenever $g \in L^{p'}(S;X^*)$ with $\|g\|_{L^{p'}(S;X^*)} = 1$ (the reverse estimate has already been discussed).
  
  \textbf{Mild case: $p > 1$.}
  In this case we have $p' < \infty$, so by density of the simple functions in $L^{p'}(S;X^*)$ and continuity of $\Phi$ we may assume that $g$ is simple, i.e.
  \begin{equation*}
    g = \sum_{n=1}^N \1_{S_n} \otimes \mb{x}_n^*
  \end{equation*}
  for some pairwise disjoint sets $S_n \in \mc{A}$ with $\mu(S_n) < \infty$ and some nonzero vectors $\mb{x}_n^* \in X^*$.
  Let $\varepsilon > 0$, and choose unit vectors $\mb{x}_n \in X$ (depending on $\varepsilon$) such that
  \begin{equation*}
    \langle \mb{x}_n, \mb{x}_n^* \rangle \geq (1-\varepsilon)\|\mb{x}_n^*\|_{X^*} \qquad \forall n \in \{1,\ldots,N\}.
  \end{equation*}
  Using these vectors define a test function
  \begin{equation*}
    f_\varepsilon := \sum_{n=1}^N \1_{S_n} \otimes \|\mb{x}_n^*\|_{X^*}^{p' - 1} \mb{x}_n.
  \end{equation*}
  Then we can compute
  \begin{equation*}
    \begin{aligned}
      \|f_\varepsilon\|_{L^p(S;X)}^p &= \sum_{n=1}^N \mu(S_n) \|\mb{x}_n^*\|_{X^*}^{p(p' - 1)} \|\mb{x}_n\|_{X}^p \\
      &= \sum_{n=1}^N \mu(S_n) \|\mb{x}_n^*\|_{X^*}^{p'}
      = \|g\|_{L^{p'}(S;X^*)}^{p'} = 1
    \end{aligned}
  \end{equation*}
  as the $\mb{x}_n$ are unit vectors and $p(p' - 1) = 1$.
  Testing $\Phi g$ against $f_{\varepsilon}$ yields
  \begin{equation*}
    \begin{aligned}
      \Phi g(f_\varepsilon) = \sum_{n=1}^N \mu(S_n) \|\mb{x}_n^*\|_{X^*}^{p' - 1} \langle \mb{x}_n, \mb{x}_n^* \rangle
      &\geq (1-\varepsilon) \sum_{n=1}^N \mu(S_n) \|\mb{x}_n^*\|_{X^*}^{p'} \\
      &= (1-\varepsilon) \|g\|_{L^{p'}(S;X^*)} = 1-\varepsilon.
    \end{aligned}
  \end{equation*}
  This proves that $\|\Phi g\|_{L^p(S;X)^*} \geq 1-\varepsilon$.
  Since $\varepsilon > 0$ was arbitrary, we find that $\|\Phi g\|_{L^p(S;X)^*} \geq 1$ as intended.

  \textbf{Spicy case: $p=1$.}
  Fix $\varepsilon > 0$ and define
  \begin{equation}
    A_{\varepsilon} := \{s \in S : \|g(s)\|_{X^*} > 1-\varepsilon\}.
  \end{equation}
  Then $\mu(A_\varepsilon) > 0$, but we could run into the problem that $\mu(A_\varepsilon) = \infty$.
  Since $S$ is $\sigma$-finite, we can write $S$ as an increasing union of sets of finite measure
  \begin{equation*}
    S = \bigcup_{n \in \N} S_n, \qquad S_n \subset S_{n+1}, \, \mu(S_n) < \infty \quad \forall n \in \N,
  \end{equation*}
  and thus for sufficiently large $n$ the set
  \begin{equation*}
    A_{\varepsilon}^{n} := \{s \in S_n : \|g(s)\|_{X^*} > 1 - \varepsilon\}
  \end{equation*}
  satisfies $0 < \mu(A_\varepsilon) < \infty$.\footnote{The main issue is that $A_{\varepsilon}^{n}$ could have zero measure, but if this were true for all $n$, then $\mu(A_{\varepsilon}) = \sup_{n \in \N} \mu(A_{\varepsilon}^n) = 0$, which is a contradiction.}
  Let $B_\varepsilon = A_{\varepsilon}^{n}$ for such a large $n$.

  Since $g$ is strongly measurable, the Pettis measurability theorem says that $g(B_\varepsilon)$ is separable, and thus there exists a sequence $(\mb{x}^*_{k})_{k \in \N}$ in $X^*$ such that
  \begin{equation*}
    g(B_\varepsilon) \subset \bigcup_{k \in \N} B_{\varepsilon}(\mb{x}^{*}_{k})
  \end{equation*}
  and thus
  \begin{equation*}
    B_{\varepsilon} \subset \bigcup_{k \in \N} g^{-1}(B_{\varepsilon}(\mb{x}^{*}_{k})).
  \end{equation*}
  Since $\mu(B_{\varepsilon}) > 0$, there exists a vector $\mb{x}^* \in X^*$ (i.e. one of the vectors $\mb{x}_k^{*}$) such that the set
  \begin{equation*}
     B_{\varepsilon, \mb{x}^*} := B_\varepsilon \cap g^{-1}(B_{\varepsilon}(\mb{x}^{*})) = \{s \in B_\varepsilon : \|g(s) - \mb{x}^{*}\|_{X^*} < \varepsilon\}
  \end{equation*}
  has positive measure.
  Picking a point $s_0 \in B_{\varepsilon, \mb{x}^*}$ and using the definition of $B_{\varepsilon}$, we see that
  \begin{equation*}
    \|\mb{x}^*\|_{X^*} \geq \|g(s_0)\|_{X^*} - \|g(s_0) - \mb{x}^*\|_{X^*} > 1 - 2\varepsilon.
  \end{equation*}

  Now fix a unit vector $\mb{x} \in X$ such that $\langle \mb{x}, \mb{x}^* \rangle \geq \|\mb{x}^*\|_{X^*} - \varepsilon$, and consider the test function
  \begin{equation*}
    f_{\varepsilon} := \1_{B_{\varepsilon, \mb{x}^*}} \otimes \mu(B_{\varepsilon, \mb{x}^*})^{-1} \mb{x}.
  \end{equation*}
  Then $\|f_{\varepsilon}\|_{L^1(S;X)} = 1$, and
  \begin{equation*}
    \begin{aligned}
      |\Phi g(f)| &=  \Big| \fint_{B_{\varepsilon, \mb{x}^*}} \langle \mb{x}, g(s) \rangle \, \dd\mu(s) \Big| \\
      &\geq \Big| \fint_{B_{\varepsilon, \mb{x}^*}} \langle \mb{x}, \mb{x}^* \rangle \, \dd\mu(s) \Big| - \Big| \fint_{B_{\varepsilon, \mb{x}^*}} \langle \mb{x}, g(s) - \mb{x} \rangle  \, \dd\mu(s) \Big| \\
      &\geq (\|\mb{x}^*\|_{X^*} - \varepsilon) - \varepsilon \geq 1 - 4\varepsilon.
    \end{aligned}
  \end{equation*}
  Since $\varepsilon > 0$ was arbitrary, we get $\|\Phi g\|_{L^1(S;X)^*} \geq 1$, as we wanted.

  \textbf{Norming property:}
  Since $X$ embeds isometrically into its double dual $X^{**}$, we can identify $X$-valued functions with $X^{**}$-valued functions which take values in $X$.
  We exploit this and the previous results to show
  \begin{equation*}
    \begin{aligned}
      \|f\|_{L^p(S;X)} = \|f\|_{L^p(S;(X^*)^*)} &= \|\Phi f\|_{L^{p'}(S; X^*)^*} \\
      &= \sup_{\substack{g \in L^{p'}(S;X^*) \\ \|g\| = 1}} \int_{S} |\langle g(s) , f(s) \rangle_{X^*, X^{**}}| \, \dd\mu(s) \\
      &= \sup_{\substack{g \in L^{p'}(S;X^*) \\ \|g\| = 1}} \int_{S} |\langle f(s) , g(s) \rangle_{X, X^*}| \, \dd\mu(s) \\
      &= \sup_{\substack{g \in L^{p'}(S;X^*) \\ g \neq 0}} \frac{|\Phi g(f)|}{\|g\|},
    \end{aligned}
  \end{equation*}
  completing the proof.
\end{proof}

\subsection{The Bochner integral}

We turn to defining integrals of vector-valued functions.
As in the scalar-valued theory we start with simple functions, for which there is only one reasonable definition.
Let $(S,\mc{A},\mu)$ be a measure space and $X$ a Banach space.
If $f \in \Simp(S;X)$ is a simple function represented as
\begin{equation*}
  f = \sum_{n=1}^N \1_{S_n} \otimes \mb{x}_n ,
\end{equation*}
and if in addition $f \in L^1(S,\mu;X)$, we define the \emph{Bochner integral}
\begin{equation*}
  \int_S f \, \dd\mu = \int_S f(s) \, \dd \mu(s) := \sum_{n=1}^N \mu(S_n) \mb{x}_n \in X.
\end{equation*}
Note that the assumption $f \in L^1(S,\mu;X)$ is equivalent to having $\mu(S_n) < \infty$ for all $n$.
The Bochner integral is a linear map $\Simp(S;X) \cap L^1(S,\mu;X) \to X$, and for $f$ as above it satisfies
\begin{equation*}
  \Big\| \int_S f(s) \, \dd \mu(s) \Big\|_X \leq |\mu(S_n)| \|\mb{x}_n\|_X = \|f\|_{L^1(S,\mu;X)}.
\end{equation*}
Thus by density of $\Simp(S;X) \cap L^1(S,\mu;X)$ in $L^1(S,\mu;X)$ (Proposition \ref{prop:simple-density}), the Bochner integral extends to a bounded linear map $L^1(S,\mu;X) \to X$ which we continue to call the Bochner integral and denote by the same symbol.
Thus the Bochner integral of $g \in L^1(S,\mu;X)$ is given by 
\begin{equation*}
  \int_S g \, \dd\mu := \lim_{n \to \infty} \int_S f_n \, \dd\mu \in X
\end{equation*}
where $f_n \in \Simp(S;X) \cap L^1(S,\mu;X)$ for all $n \in \N$ and $f_n \to g$ in $L^1(S,\mu;X)$.

The Bochner integral satisfies the following properties.
\begin{prop}
  Let $(S,\mc{A},\mu)$ be a measure space and $X$ a Banach space.
  The Bochner integral satisfies the following properties:
  \begin{description}
  \item[Linearity] For $f_1, f_2 \in L^1(S,\mu;X)$ and $\lambda_1, \lambda_2 \in \K$,
    \begin{equation*}
      \int_S (\lambda_1 f_1 + \lambda_2 f_2)(s) \, \dd\mu(s) = \lambda_1 \int_S f_1(s) \dd\mu(s) + \lambda_2 \int_S f_2(s) \dd\mu(s) .
    \end{equation*}
  \item[Commutation with linear maps] If $f \in L^1(S,\mu;X)$ and $T \in \Lin(X,Y)$ is a bounded linear map into a Banach space $Y$,
    \begin{equation*}
      T\Big( \int_S f \, \dd\mu \Big) = \int_S Tf(s) \, \dd\mu(s) \in Y
    \end{equation*}
    where $Tf \in L^1(S,\mu;Y)$ is given by $(Tf)(s) = T(f(s))$ for almost all $s \in S$.
    In particular, if $\mb{x}^* \in X^* = \Lin(X,\K)$, then
    \begin{equation*}
      \Big\langle \int_S f \, \dd\mu, \mb{x}^* \Big\rangle = \int_S \langle f(s), \mb{x}^* \rangle \, \dd\mu(s) \in \K.
    \end{equation*}
  \item[Closure] If $f \in L^1(S,\mu;X)$ and $X_0$ is a closed subspace of $X$ such that $f(s) \in X_0$ for almost all $s \in S$, then $\int_S f \, \dd\mu \in X_0$.
  \item[Dominated convergence] Let $(f_n)_{n \in \N}$ be a sequence in $L^1(S,\mu;X)$, $\map{f}{S}{X}$, and suppose that $\lim_{n \to \infty} f_n = f$ almost everywhere.
    Suppose that there exists a non-negative $g \in L^1(S,\mu)$ such that $\|f_n\|_X \leq g$ almost everywhere.
    Then $f \in L^1(S,\mu;X)$ and
    \begin{equation*}
      \int_S f \, \dd\mu = \lim_{n \to \infty} \int_S f_n \, \dd\mu.
    \end{equation*}
  \item[Substitution / Change of Variables]
    Let $(T,\mc{B})$ be a measurable space and $\map{\phi}{S}{T}$ a measurable function, and let $\nu = \mu \circ \phi^{-1}$ denote the pushforward measure.
    Suppose $g \in L^1(T,\nu;X)$.
    Then $g \circ \phi \in L^1(S,\mu;X)$, and
    \begin{equation*}
      \int_S g \circ \phi \, \dd\mu = \int_T g \, \dd\nu.
    \end{equation*}
    
  \end{description}
\end{prop}

\begin{proof}
  Linearity follows from the definition.
  The remaining properties are proved as follows:
  
  \begin{description}
 
    \item[Commutation with linear maps] by continuity it suffices to prove this for simple $f \in \Simp(S;X) \cap L^1(S,\mu;X)$.
    Writing $f$ as in \eqref{eqn:simple-function-standard-form} we have 
    \begin{equation*}
        T\Big(\int_S \sum_{n=1}^N \1_{S_n} \otimes \mb{x}_n \, \dd\mu \Big)
        = \sum_{n=1}^N \mu(S_n) \otimes T(\mb{x}_n) 
        = \int_S Tf \, \dd\mu.
    \end{equation*}
        
  \item[Closure] We may assume that $X_0$ is a proper subspace of $X$, otherwise there is nothing to show.
    Let $\mb{y} \in X \sm X_0$, and by Hahn--Banach\footnote{If you are philosophically opposed to Hahn--Banach, then see \cite[Corollary 1.1.22]{HNVW16} for a proof that avoids it, and promptly stop reading these notes to avoid further frustration.} choose a functional $\mb{x}^* \in X^*$ such that $\langle \mb{y}, \mb{x}^* \rangle = 1$ and $X_0 \subset \ker \mb{x}^*$.
    Then by the commutation property above we have
    \begin{equation*}
      \Big\langle \int_S f \, \dd\mu, \mb{x}^* \Big\rangle = \int_S \langle f(s), \mb{x}^* \rangle \, \dd\mu(s) = 0
    \end{equation*}
    since $f(s) \in X_0$ for almost all $s \in S$.
    Thus $\int_S f \, \dd\mu \neq y$.
    Since $y \in X \sm X_0$ was arbitrary, we conclude that $\int_S f \, \dd\mu \in X_0$.

  \item[Dominated convergence]
    By continuity of the Bochner integral it suffices to show that $f \in L^1(S,\mu;X)$ and  $f_n \to f$ in $L^1(S,\mu;X)$.
    The first fact follows from $\|f\|_{L^1(S,\mu;X)} \leq \|g\|_{L^1(S,\mu)}$.
    For the second, since $\|(f_n - f)(s)\|_X \leq 2g(s)$ almost everywhere, we have
    \begin{equation*}
      \lim_{n \to \infty} \int_S \|(f_n - f)(s)\|_X \, \dd\mu(s) = 0
    \end{equation*}
    by scalar dominated convergence.

  \item[Substitution]
    First we need to show that $g \circ \phi$ is strongly measurable.
    Let
    \begin{equation*}
      g_i = \sum_{n=1}^{N_i} \1_{S_{n,i}} \otimes \mb{x}_{n,i}
    \end{equation*}
    be a sequence of simple functions converging to $g$ $\mu$-almost everywhere.
    Then
    \begin{equation*}
      g_i \circ \phi = \sum_{n=1}^{N_i} (\1_{S_{n,i}} \circ \phi) \otimes \mb{x}_{n,i} = \sum_{n=1}^{N_i} \1_{\phi^{-1}(S_{n,i})} \otimes \mb{x}_{n,i}
    \end{equation*}
    is a sequence of simple functions converging to $g \circ \phi$ $\nu$-almost everywhere, so $g \circ \phi$ is also strongly measurable.
    The identity for scalar-valued functions
    \begin{equation*}
      \int_S \|f \circ \phi(s)\|_X \, \dd\mu(s) = \int_T \|f(s)\|_X \, \dd\nu(t)
    \end{equation*}
    implies that $f \circ \phi \in L^1(S,\mu;X)$.
    Finally, for all $\mb{x}^* \in X^*$ we have by the commutation property and the substitution identity for scalar-valued functions
    \begin{equation*}
      \begin{aligned}
        \Big\langle \int_S f \circ \phi \, \dd\mu , \mb{x}^* \Big\rangle
        = \int_S \langle f(\phi(s)), \mb{x}^* \rangle \, \dd\mu(s)
        &= \int_T \langle f(s), \mb{x}^* \rangle \, \dd\nu(t) \\
        &= \Big\langle \int_T f \, \dd\nu, \mb{x}^* \Big\rangle,
      \end{aligned}
    \end{equation*}
    which proves the result.
  \end{description}
\end{proof}

There is also a Fubini theorem for Banach-valued functions (but no Tonelli theorem, as we do not have access to the notion of a non-negative vector-valued function).

\begin{prop}[Fubini]
  Let $(S,\mc{A},\mu)$ and $(T,\mc{B},\nu)$ be $\sigma$-finite measure spaces\footnote{The scalar Fubini theorem fails for non-$\sigma$-finite spaces!} and let $f \in L^1(S \times T; X)$.
  Then
  \begin{itemize}
  \item for almost all $s \in S$ the function $f(s,\cdot)$ is in $L^1(T;X)$,
  \item for almost all $t \in T$ the function $f(\cdot,t)$ is in $L^1(S;X)$,
  \item the functions $\int_T f(\cdot,t) \, \dd\nu(t)$ and $\int_S f(s,\cdot) \, \dd\mu(s)$ are in $L^1(T;X)$ and $L^1(S;X)$ respectively, and
    \begin{equation}\label{eq:fubini}
      \int_{S \times T} f \, \dd(\mu \times \nu) = \int_T \Big(  \int_S f(s,t) \, \dd\mu(s) \Big) \, \dd\nu(t) = \int_S \Big(\int_T f(s,t) \, \dd\nu(t) \Big) \, \dd\mu(s).
    \end{equation}
  \end{itemize}
\end{prop}

\begin{proof}
  Consider an everywhere-defined representative of $f$.
  Since $f$ is strongly measurable, by the Pettis measurability theorem (Theorem \ref{thm:Pettis-measurability}), it is weakly measurable and separably valued.
  Thus the functions $f(s,\cdot)$ and $f(\cdot,t)$ are separably valued for all $s \in S$ and $t \in T$, and by the corresponding scalar-valued result, they are both weakly measurable.
  Thus $f(s,\cdot)$ and $f(\cdot,t)$ are strongly measurable.
  Now since the function $(s,t) \mapsto \|f(s,t)\|_X$ is integrable, the scalar Fubini theorem implies all of the integrability claims.
  The equalities \eqref{eq:fubini} are proven by scalarisation: for $\mb{x}^* \in X^*$ we have
  \begin{equation*}
    \begin{aligned}
      \Big\langle \int_{S \times T} f \, \dd(\mu \times \nu) , \mb{x}^* \Big\rangle
      &= \int_{S \times T} \langle f(s,t), \mb{x}^* \rangle \, \dd(\mu \times \nu) \\
      &= \int_{S} \int_{T} \langle f(s,t), \mb{x}^* \rangle \, \dd\nu(t) \, \dd\mu(s) \\
      &= \int_{S} \Big\langle \int_{T} f(s,t) \, \dd\nu(t) , \mb{x}^* \Big\rangle \, \dd\mu(s) \\
      &= \Big\langle \int_S \Big(\int_{T} f(s,t) \, \dd\nu(t) \Big)\, \dd\mu(s) , \mb{x}^* \Big\rangle
  \end{aligned}
  \end{equation*}
  by the scalar Fubini theorem, and likewise with the order of $S$ and $T$ reversed.
\end{proof}

Let's move away from the abstract stuff for a moment and define the most important operators in analysis.

\begin{defn}
  Let $X$ be a complex Banach space.
  For a Bochner integrable function $f \in L^1(\R^d;X)$ we define the \emph{Fourier transform} as the Bochner integral
  \begin{equation*}
    \hat{f}(\xi) = \mc{F}(f)(\xi) := \int_{\R^d} f(t) e^{-2\pi i t \cdot \xi} \, \dd t \qquad \forall \xi \in \R^d. 
  \end{equation*}
  Note that $\hat{f}(\xi) \in X$ for all $x \in \R^d$.
  We also define the \emph{inverse Fourier transform} on $g \in L^1(\R^d;X)$:
  \begin{equation*}
    g^{\vee}(t) = \mc{F}^{-1}(g)(x) := \int_{\R^d} g(\xi) e^{2\pi i t \cdot \xi} \, \dd \xi \qquad \forall t \in \R^d.
  \end{equation*}

  For functions $f \in L^1(\T^d ; X)$ on the $d$-torus $\T^d = [0,1]^d$, we use the same notation for the Fourier transform (and its inverse on $g \in L^1(\Z^d; X)$)
  \begin{equation*}
    \begin{aligned}
      \hat{f}(n) &= \mc{F}(f)(n) := \int_{\T^d} f(t) e^{-2\pi i t \cdot n} \, \dd t \qquad \forall n \in \Z^d, \\
      g^{\vee}(t) &= \mc{F}^{-1}(g)(t) := \sum_{n \in \Z^d} g(n) e^{2\pi i t \cdot n} X \qquad \forall t \in \R^d.
    \end{aligned}
  \end{equation*}
\end{defn}

Note that if $f \in L^1(\R^d;X)$, then the function $x \mapsto f(x)e^{-2\pi i x \cdot \xi}$ is strongly integrable for each $\xi \in \R^d$ (see Lemma \ref{cor:strong-meas-meas-mult}), so the definitions above make sense.\footnote{Analogous statements hold for $\T^d$ and $\Z^d$ of course.}
Furthermore
\begin{equation*}
  \|\hat{f}(\xi)\|_X \leq \int_{\R^d} \| f(x) e^{-2\pi i x \cdot \xi} \|_X \, \dd x = \|f\|_{L^1(\R^d;X)}.
\end{equation*}
In fact, $\hat{f}$ is itself strongly integrable, and the Fourier transform is bounded from $L^1(\R^d;X)$ to $L^\infty(\R^d;X)$ (see Exercise \ref{ex:FT-bounded-1-infty}).
Formally, the Fourier transform and inverse Fourier transform are mutually inverse operators, but to make this statement rigourous we have to restrict to appropriate classes of functions or distributions, which for now we will not do.



\subsection{Extensions of operators to Bochner spaces}

\begin{defn}
  For a measurable space $(S,\mc{A})$ and a set $V \subset \Meas(S;\K)$ of measurable scalar-valued functions on $S$, we define the \emph{algebraic tensor product}
  \begin{equation*}
    V \otimes X := \spn\{f \otimes \mb{x} : f \in V, \mb{x} \in X\} \subset \SMeas(S;X).\footnote{Functions in $V \otimes X$ are strongly measurable since they have finite-dimensional range.}
  \end{equation*}
  That is, $V \otimes X$ is the set of finite linear combinations of $X$-valued functions of the form $f \otimes \mb{x}$, where $f$ is a scalar-valued function in $V$ and $\mb{x} \in X$.
\end{defn}

For example, when $V$ is the set of characteristic functions of measurable sets, $V \otimes X = \Simp(S;X)$ is the set of $X$-valued simple functions.
Another fundamental example is $V = L^p(S)$ for some $p \in [1,\infty]$.

\begin{prop}\label{prop:ATP-density}
  Let $(S,\mc{A},\mu)$ be a measure space, $X$ a Banach space, and $p \in [1,\infty)$.
  Then $L^p(S) \otimes X$ is a dense subspace of $L^p(S;X)$.
\end{prop}

\begin{proof}
  For $f \in L^p(S)$ and $\mb{x} \in X$ we compute
  \begin{equation*}
    \|f \otimes \mb{x}\|_{L^p(S,\mu;X)}^p = \int_S \|f(s)\mb{x}\|_{X}^p \, \dd\mu(s) = \|\mb{x}\|_X^p \|f\|_{L^p(S)}^p,
  \end{equation*}
  so that $f \otimes \mb{x} \in L^p(S;X)$.
  By linearity, this implies $L^p(S) \otimes X$ is contained in $L^p(S;X)$.
  For density, note that $L^p(S) \otimes X$ contains $(\Sigma(S;\K) \cap L^p(S)) \otimes X$, and that
  \begin{equation*}
    (\Sigma(S;\K) \cap L^p(S)) \otimes X = \Sigma(S;X) \cap L^p(S;X),
  \end{equation*}
  as both spaces are equal to the set of simple functions with finite measure support.
  By Proposition \ref{prop:simple-density}, this space is dense in $L^p(S;X)$, and thus the same is true of $L^p(S) \otimes X$.
\end{proof}

\begin{defn}\label{defn:tensor-exts}
  Let $(S_i,\mc{A}_i,\mu_i)$ ($i \in \{1,2\}$) be measure spaces, $p_1 \in [1,\infty)$ and $p_2 \in [1,\infty]$, and consider a bounded linear operator
  \begin{equation*}
    \map{T}{L^{p_1}(S_1,\mu_1)}{L^{p_2}(S_2,\mu_2)}
  \end{equation*}
  acting on scalar-valued functions.
  Let $X$ be a Banach space.
  The \emph{tensor extension} of $T$ with the identity $\map{I}{X}{X}$ is the map between algebraic tensor products
  \begin{equation*}
    \map{T \otimes I}{L^{p_1}(S_1,\mu_1) \otimes X}{L^{p_2}(S_2,\mu_2) \otimes X}
  \end{equation*}
  satisfying $(T \otimes I)(f \otimes \mb{x}) = (Tf) \otimes \mb{x}$ for all $f \in L^{p_1}(S_1,\mu_1)$ and $\mb{x} \in X$.
\end{defn}

The tensor extension is a well-defined map between algebraic tensor products $L^{p_1}(S_1) \otimes X \to L^{p_2}(S_2) \otimes X$.
By Proposition \ref{prop:ATP-density}, $L^{p_1}(S_1) \otimes X$ is a dense subspace of $L^{p_1}(S_1;X)$, while $L^{p_2}(S_2) \otimes X$ is a subspace of $L^{p_2}(S_2;X)$ (possibly non-dense if $p_2 = \infty$), so if there exists $C < \infty$ such that
\begin{equation}\label{eq:tensor-ext-estimate}
  \|(T \otimes I)f\|_{L^{p_2}(S_2;X)} \leq C \|f\|_{L^{p_1}(S_1;X)} \qquad \forall f \in L^{p_1}(S_1) \otimes X,
\end{equation}
then $T \otimes I$ may be extended to a bounded linear operator $L^{p_1}(S_1;X) \to L^{p_2}(S_2;X)$.

\begin{defn}
  With the notation above, if the estimate \eqref{eq:tensor-ext-estimate} holds, we say that $T$ \emph{admits a bounded $X$-valued extension}, and we denote the continuous extension of $T \otimes I$ by $\td{T}_X$, $\td{T}$, or even just $T$.
\end{defn}


Writing out a general element $f \in L^p(S) \otimes X$ as a linear combination of elementary tensors, we see that $T$ admits a bounded $X$-valued extension if and only if there exists a constant $C < \infty$ such that
\begin{equation}\label{eq:tensor-ext-estimate-full}
  \Big\|\sum_{n=1}^N (Tf_n) \otimes \mb{x}_n\Big\|_{L^{p_2}(S_2;X)} \leq C \Big\|\sum_{n=1}^N f_n \otimes \mb{x}_n\Big\|_{L^{p_1}(S_1;X)}
\end{equation}
for all functions $f_n \in L^{p_1}(S_1)$ and vectors $\mb{x}_n \in X$.
This estimate does not simply follow from boundedness of $T$.
It turns out to rely on potentially subtle interactions between the operator $T$ and the Banach space $X$.

We have already seen one fundamental example.
\begin{example}
  Fix a measure space $(S,\mc{A},\mu)$ and let $\map{T}{L^1(S)}{\K}$ denote the Lebesgue integral.\footnote{This fits in the scope of Definition \ref{defn:tensor-exts} by considering $\C$ as a Lebesgue space $L^1(\mathrm{pt})$ over a single point, with counting measure. Then $X$ may be identified with the Bochner space $L^1(\mathrm{pt};X)$.}
  Let $X$ be a Banach space.
  Then for all $f \in \Simp(S;\K) \otimes X$ we have
  \begin{equation*}
    (T \otimes I)f = (T \otimes I)\Big(\sum_{n=1}^N \1_{S_n} \otimes \mb{x}_n \Big) = \sum_{n=1}^N T(\1_{S_n}) \otimes \mb{x}_n = \sum_{n=1}^N \mu(S_n) \otimes \mb{x}_n = \int_S f \, \dd\mu,
  \end{equation*}
  so that the tensor extension of the Lebesgue integral agrees with the Bochner integral, which we have already shown maps $L^1(S;X)$ to $X$.
  Thus the Lebesgue integral admits a bounded $X$-valued extension, namely the Bochner integral.
\end{example}

In this example, the Banach space $X$ plays no real role; we will see in Theorem \ref{thm:positive-extensions} that this phenomenon occurs for all positive operators.
Before that we record a simple observation: tensor extensions can do no better than the original operator.

\begin{prop}
  Fix measure spaces $(S_i,\mc{A}_i,\mu_i)$ ($i \in \{1,2\}$) and exponents $p_1 \in [1,\infty)$, $q \in [1,\infty]$.
  Let $T \in \Lin(L^p(S),L^q(S))$ be a bounded linear operator, and let $X$ be a Banach space.
  Then the tensor extension $T \otimes I$ satisfies
  \begin{equation*}
    \|T \otimes I\|_{L^{p_1}(S_1;X) \to L^{p_2}(S_2;X)} \geq \|T\|_{L^{p_1}(S_1) \to L^{p_2}(S_2)}.
  \end{equation*}
\end{prop}

\begin{proof}
  Fix a nonzero vector $\mb{x} \in X$.
  Then for all nonzero $f \in L^{p_1}(S_1)$ we have
  \begin{equation*}
    \begin{aligned}
      \|(T \otimes I)(f \otimes \mb{x})\|_{L^{p_2}(S_2;X)} = \|Tf \otimes \mb{x}\|_{L^{p_2}(S_2;X)} &= \|Tf\|_{L^{p_2}(S_2)} \|\mb{x}\|_X \\
      &= \frac{\|Tf\|_{L^{p_2}(S_2)}}{\|f\|_{L^{p_1}(S_1)}} \|f \otimes \mb{x}\|_{L^{p_1}(S_1;X)}.
    \end{aligned}
  \end{equation*}
  Taking the supremum over all nonzero $f \in L^p(S)$ completes the proof.
\end{proof}

\begin{thm}\label{thm:positive-extensions}
  Fix measure spaces $(S_i,\mc{A}_i,\mu_i)$ ($i \in \{1,2\}$), $p_1 \in [1,\infty)$, and $p_2 \in [1,\infty]$.
  Let $T \in \Lin(L^{p_1}(S_1),L^{p_2}(S_2))$ be a bounded linear operator which is \emph{positive}, meaning that for all a.e. non-negative $f \in L^{p_1}(S_1)$, $Tf \in L^{p_2}(S_2)$ is also a.e. non-negative.\footnote{When the scalar field $\K$ is $\C$, `non-negative' simply means `real-valued and non-negative'.}
  Then $T$ admits a bounded $X$-valued extension for every Banach space $X$, and in fact
  \begin{equation*}
    \|\td{T}\|_{L^{p_1}(S_1;X) \to L^{p_2}(S_2;X)} = \|T\|_{L^{p_1}(S_1) \to L^{p_2}(S_2)}.
  \end{equation*}
\end{thm}

\begin{proof}
  We will show the estimate
  \begin{equation}\label{eq:positive-pw-est}
    \|\td{T}f(s)\|_X \leq T(\|f\|_X)(s)
  \end{equation}
  for all $f \in \Simp(S;X) \cap L^{p_1}(S_1;X)$ and almost all $s \in S$.
  This will imply
  \begin{equation*}
    \begin{aligned}
      \|\td{T}f\|_{L^{p_2}(S_2;X)} &= \Big( \int_{S} \|\td{T}f(s)\|_X^{p_2} \, \dd\mu(s) \Big)^{1/p_2} \\
      &\leq \Big( \int_{S} T(\|f(s)\|_X)^{p_2} \, \dd\mu(s) \Big)^{1/p_2}\\
      &\leq \|T\|_{L^{p_1}(S_1) \to L^{p_2}(S_2)} \Big( \int_{S} \|f(s)\|_X^{p_1} \, \dd\mu(s) \Big)^{1/p_1} \\
      &= \|T\|_{L^{p_1}(S_1) \to L^{p_2}(S_2)} \|f\|_{L^{p_1}(S_1;X)}
    \end{aligned}
  \end{equation*}
  which implies the result by density of $\Simp(S;X) \cap L^{p_1}(S_1;X)$ in $L^{p_1}(S_1;X)$.

  Now let's prove \eqref{eq:positive-pw-est}.
  Consider a simple function
  \begin{equation*}
    f = \sum_{n=1}^N \1_{S_n} \otimes \mb{x}_n
  \end{equation*}
  and note that $|T(\1_{S_n})| = T(\1_{S_n})$ by positivity of $T$.
  Then
  \begin{equation*}
    \begin{aligned}
      \|\td{T}f(s)\|_X &= \Big\| \sum_{n=1}^N T(\1_{S_n})(s) \mb{x}_n \Big\|_X \\
      &\leq \sum_{n=1}^N |T(\1_{S_n})(s)| \|\mb{x}_n\|_X \\
      &= \sum_{n=1}^N T(\1_{S_n})(s) \|\mb{x}_n\|_X 
      = T\Big( \sum_{n=1}^N \1_{S_n} \|\mb{x}_n\|_X \Big)(s) 
      = T(\|f\|_X)(s),
    \end{aligned}
  \end{equation*}
  proving \eqref{eq:positive-pw-est} and completing the proof.
\end{proof}

Theorem \ref{thm:positive-extensions} shows that the `extension problem' for positive operators is not much of a problem: positive operators extend automatically.
Of course, most interesting operators are not positive.

\begin{example}
  \todo{Fourier transform. counterexample for $\ell^\infty$}\todo{write this up}
\end{example}



\subsection*{Exercises}

\begin{exercise}\label{ex:measurability-containments}
  Let $X$ be a Banach space and $(S,\mc{A})$ a measurable space.
  Prove the containments
  \begin{equation*}
    \SMeas(S;X) \subset \Meas(S;X) \subset \WMeas(S;X).
  \end{equation*}
\end{exercise}

\begin{exercise}
  Let $X$ be a Banach space, let $A$ be a topological space, and let $\mu$ be a Borel measure on $A$.
  \begin{itemize}
  \item If $X$ is separable or $A$ is separable, show that $C(A;X)$ is contained in $L^\infty(A, \mu;X)$.
  \item Give an example of a topological space $A$ and a Banach space $X$ such that $C(A;X)$ is not contained in $L^\infty(A,\mu;X)$.
  \end{itemize}
\end{exercise}

\begin{exercise}
  Let $(S_i, \mc{A}_i, \mu_i)$ ($i \in \{1,2\}$) be measure spaces, let $p_1 \in [1,\infty)$, and let $p_2 \in [1,\infty]$.
  Suppose that $T \in \Lin(L^{p_1}(S_1), L^{p_2}(S_2))$ is a bounded linear operator. 
  Show that $T$ admits a bounded $X$-valued extension for all finite-dimensional Banach spaces $X$.
\end{exercise}

\begin{exercise}\label{ex:tensor-adjoint}
  Let $(S,\mc{A},\mu)$ be a measure space and $p \in (1,\infty)$, let $T$ be a bounded linear operator on $L^p(S,\mu)$, and let $X$ be a Banach space.
  Let $T^*$ denote the adjoint of $T$.
  Show that $T$ admits a bounded $X$-valued extension if and only if the adjoint $T^* \in \Lin(L^{p'}(S,\mu))$ admits a bounded $X^*$-valued extension, and show that
  \begin{equation*}
    (\td{T}_X)^* \Phi f = \td{(T^*)}_{X^*} f
  \end{equation*}
  for all $f \in L^{p'}(S;X^*)$, where $\map{\Phi}{L^{p'}(S;X^*)}{L^p(S;X)^*}$ is as in Proposition \ref{prop:bochner-preduality}. 
\end{exercise}

\begin{exercise}\label{ex:FT-bounded-1-infty}
  Let $X$ be a complex Banach space.
  Show that $\hat{f} \in C(\R^d;X)$ for all $f \in L^1(\R^d;X)$.
  Conclude that the Fourier transform is bounded from $L^1(\R^d;X)$ to $L^\infty(\R^d;X)$.
\end{exercise}

\begin{exercise}
  Let $X$ and $Y$ be Banach spaces and consider an operator-valued function $\map{M}{\R^d}{\Lin(X,Y)}$, where $\Lin(X,Y)$ is the Banach space of bounded linear operators from $X$ to $Y$.
  Suppose that $M$ is continuous with respect to the strong operator topology on $\Lin(X,Y)$: that is, suppose that for all vectors $\mb{x} \in X$, the map
  \begin{equation*}
    \map{M(\cdot)\mb{x}}{\R^d}{Y}, \qquad \xi \mapsto M(\xi)\mb{x}
  \end{equation*}
  is continuous.
  \begin{itemize}
  \item
    Let $\map{g}{\R^d}{X}$ be strongly measurable.
    Show that the function $\map{Mg}{\R^d}{Y}$ defined by $(Mg)(\xi) := M(\xi)g(\xi)$ is strongly measurable.
  \item
    Suppose in addition that the function $\xi \mapsto \|M(\xi)\|_{\Lin(X,Y)}$ is measurable,\footnote{This can be proven under various assumptions, but don't worry about that now.} and that
    \begin{equation*}
      \int_{\R^d} \|M(\xi)\|_{\Lin(X,Y)} \, \dd \xi < \infty.
    \end{equation*}
    Show that the operator $T_Mf := (M\hat{f})^\vee$ is well-defined and bounded from $L^1(\R^d;X)$ to $C(\R^d;Y)$.
  \end{itemize}
\end{exercise}

\begin{exercise}
  Let $H$ be an infinite-dimensional separable Hilbert space with inner product $(\cdot , \cdot)$, and let $(S,\mc{A},\mu)$ be a measure space.
  \begin{itemize}
  \item Show that $L^2(S;H)$ is a Hilbert space with respect to the inner product
    \begin{equation*}
      (f, g) := \int_{S} (f(s), g(s)) \, \dd\mu(s) \qquad (f,g \in L^2(S;H)).
    \end{equation*}
  \item Let $(\mb{h}_n)_{n \in \N}$ be an orthonormal basis of $H$, and $(f_n)_{n \in \N}$ an orthonormal basis of $L^2(S,\mu)$.
    Show that the elementary tensors $\{f_n \otimes \mb{h}_m : n,m \in \N\}$ are an orthonormal basis of $L^2(S;H)$.
  \item Suppose that the Hilbert space $H$, as above, is defined over $\C$.
    Show that the Fourier transform on the torus, initially defined as a bounded operator $\map{\mc{F}}{L^1(\T^d;H)}{\ell^\infty(\Z^d;H)}$, extends to an isometry from $L^2(\T^d;H)$ to $\ell^2(\Z^d;H)$.
  \end{itemize}
\end{exercise}

\begin{exercise}
  Give an example of a measure space $(S, \mc{A}, \mu)$, a Banach space $X$, and a measurable function $\map{f}{S}{X}$ such that
  \begin{itemize}
  \item $\langle f, \mb{x}^* \rangle \stackrel{\ae}{=} 0$ for all $\mb{x}^* \in X^*$,
  \item $f$ is everywhere non-zero.
  \end{itemize}
  \todo{I don't even know the answer to this one, maybe too hard...}
\end{exercise}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../main.tex"
%%% End:
